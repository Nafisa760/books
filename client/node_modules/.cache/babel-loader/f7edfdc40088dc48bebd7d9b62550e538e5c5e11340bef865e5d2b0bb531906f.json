{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst SERVER_URL = \"http://localhost:3001\";\n\n/* -------------------------------------------------------\r\n   ðŸ”¹ 1) Fetch Borrowed Books\r\n------------------------------------------------------- */\nexport const fetchBorrowedBooks = createAsyncThunk(\"borrowed/fetchBorrowedBooks\", async (username, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.get(`${SERVER_URL}/borrowedbooks/${username}`);\n    return res.data; // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ù‚ØªØ±Ø¶Ø© (ØºÙŠØ± Ø§Ù„Ù…Ø±Ø¬Ø¹Ø©)\n  } catch (err) {\n    var _err$response;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : _err$response.data) || \"Error fetching borrowed books\");\n  }\n});\n// Fetch all borrowed books (for Admin)\nexport const fetchAllBorrowedBooks = createAsyncThunk(\"borrowed/fetchAllBorrowedBooks\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.get(`${SERVER_URL}/borrowedbooks/all`);\n    return res.data;\n  } catch (err) {\n    var _err$response2;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : _err$response2.data) || \"Error fetching all borrowed books\");\n  }\n});\n\n// extraReducers\nbuilder.addCase(fetchAllBorrowedBooks.pending, state => {\n  state.loading = true;\n  state.error = null;\n}).addCase(fetchAllBorrowedBooks.fulfilled, (state, action) => {\n  state.loading = false;\n  state.borrowedBooks = action.payload;\n}).addCase(fetchAllBorrowedBooks.rejected, (state, action) => {\n  state.loading = false;\n  state.error = action.payload;\n});\n\n/* -------------------------------------------------------\r\n   ðŸ”¹ 2) Return Book\r\n------------------------------------------------------- */\nexport const returnBook = createAsyncThunk(\"borrowed/returnBook\", async ({\n  _id,\n  rating,\n  feedback\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.put(`${SERVER_URL}/borrowedbooks/return/${_id}`, {\n      rating,\n      feedback\n    });\n    return res.data; // ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹\n  } catch (err) {\n    var _err$response3;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : _err$response3.data) || \"Error returning book\");\n  }\n});\n\n/* -------------------------------------------------------\r\n   ðŸ”¹ Slice\r\n------------------------------------------------------- */\nconst borrowedSlice = createSlice({\n  name: \"borrowed\",\n  initialState: {\n    borrowedBooks: [],\n    loading: false,\n    error: null,\n    successMessage: null // Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­\n  },\n  reducers: {\n    clearSuccessMessage: state => {\n      state.successMessage = null;\n    }\n  },\n  extraReducers: builder => {\n    builder\n    /* -------------------------------------------------------\r\n       fetchBorrowedBooks\r\n    ------------------------------------------------------- */.addCase(fetchBorrowedBooks.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(fetchBorrowedBooks.fulfilled, (state, action) => {\n      state.loading = false;\n      state.borrowedBooks = action.payload;\n    }).addCase(fetchBorrowedBooks.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    })\n\n    /* -------------------------------------------------------\r\n       returnBook\r\n    ------------------------------------------------------- */.addCase(returnBook.pending, state => {\n      state.loading = true;\n      state.error = null;\n    }).addCase(returnBook.fulfilled, (state, action) => {\n      state.loading = false;\n      state.successMessage = \"Successfully returned the book!\";\n\n      // Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù€ state Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… _id\n      state.borrowedBooks = state.borrowedBooks.filter(b => b._id !== action.meta.arg._id);\n    }).addCase(returnBook.rejected, (state, action) => {\n      state.loading = false;\n      state.error = action.payload;\n    });\n  }\n});\nexport const {\n  clearSuccessMessage\n} = borrowedSlice.actions;\nexport default borrowedSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","SERVER_URL","fetchBorrowedBooks","username","rejectWithValue","res","get","data","err","_err$response","response","fetchAllBorrowedBooks","_","_err$response2","builder","addCase","pending","state","loading","error","fulfilled","action","borrowedBooks","payload","rejected","returnBook","_id","rating","feedback","put","_err$response3","borrowedSlice","name","initialState","successMessage","reducers","clearSuccessMessage","extraReducers","filter","b","meta","arg","actions","reducer"],"sources":["C:/Nafisa/books/client/src/Features/BorrowedBookModelSlice.js"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst SERVER_URL = \"http://localhost:3001\";\r\n\r\n/* -------------------------------------------------------\r\n   ðŸ”¹ 1) Fetch Borrowed Books\r\n------------------------------------------------------- */\r\nexport const fetchBorrowedBooks = createAsyncThunk(\r\n  \"borrowed/fetchBorrowedBooks\",\r\n  async (username, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.get(`${SERVER_URL}/borrowedbooks/${username}`);\r\n      return res.data; // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ¨ Ø§Ù„Ù…Ù‚ØªØ±Ø¶Ø© (ØºÙŠØ± Ø§Ù„Ù…Ø±Ø¬Ø¹Ø©)\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data || \"Error fetching borrowed books\");\r\n    }\r\n  }\r\n);\r\n// Fetch all borrowed books (for Admin)\r\nexport const fetchAllBorrowedBooks = createAsyncThunk(\r\n  \"borrowed/fetchAllBorrowedBooks\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.get(`${SERVER_URL}/borrowedbooks/all`);\r\n      return res.data;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data || \"Error fetching all borrowed books\");\r\n    }\r\n  }\r\n);\r\n\r\n// extraReducers\r\nbuilder\r\n  .addCase(fetchAllBorrowedBooks.pending, (state) => {\r\n    state.loading = true;\r\n    state.error = null;\r\n  })\r\n  .addCase(fetchAllBorrowedBooks.fulfilled, (state, action) => {\r\n    state.loading = false;\r\n    state.borrowedBooks = action.payload;\r\n  })\r\n  .addCase(fetchAllBorrowedBooks.rejected, (state, action) => {\r\n    state.loading = false;\r\n    state.error = action.payload;\r\n  });\r\n\r\n\r\n/* -------------------------------------------------------\r\n   ðŸ”¹ 2) Return Book\r\n------------------------------------------------------- */\r\nexport const returnBook = createAsyncThunk(\r\n  \"borrowed/returnBook\",\r\n  async ({ _id, rating, feedback }, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.put(`${SERVER_URL}/borrowedbooks/return/${_id}`, {\r\n        rating,\r\n        feedback\r\n      });\r\n      return res.data; // ÙŠØ­ØªÙˆÙŠ Ø¹Ù„Ù‰ Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„ÙƒØªØ§Ø¨ Ø¨Ø¹Ø¯ Ø§Ù„Ø¥Ø±Ø¬Ø§Ø¹\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data || \"Error returning book\");\r\n    }\r\n  }\r\n);\r\n\r\n/* -------------------------------------------------------\r\n   ðŸ”¹ Slice\r\n------------------------------------------------------- */\r\nconst borrowedSlice = createSlice({\r\n  name: \"borrowed\",\r\n  initialState: {\r\n    borrowedBooks: [],\r\n    loading: false,\r\n    error: null,\r\n    successMessage: null, // Ù„Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ù†Ø¬Ø§Ø­\r\n  },\r\n\r\n  reducers: {\r\n    clearSuccessMessage: (state) => {\r\n      state.successMessage = null;\r\n    },\r\n  },\r\n\r\n  extraReducers: (builder) => {\r\n    builder\r\n      /* -------------------------------------------------------\r\n         fetchBorrowedBooks\r\n      ------------------------------------------------------- */\r\n      .addCase(fetchBorrowedBooks.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(fetchBorrowedBooks.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.borrowedBooks = action.payload;\r\n      })\r\n      .addCase(fetchBorrowedBooks.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      })\r\n\r\n      /* -------------------------------------------------------\r\n         returnBook\r\n      ------------------------------------------------------- */\r\n      .addCase(returnBook.pending, (state) => {\r\n        state.loading = true;\r\n        state.error = null;\r\n      })\r\n      .addCase(returnBook.fulfilled, (state, action) => {\r\n        state.loading = false;\r\n        state.successMessage = \"Successfully returned the book!\";\r\n\r\n        // Ø­Ø°Ù Ø§Ù„ÙƒØªØ§Ø¨ Ù…Ø¨Ø§Ø´Ø±Ø© Ù…Ù† Ø§Ù„Ù€ state Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… _id\r\n        state.borrowedBooks = state.borrowedBooks.filter(\r\n          b => b._id !== action.meta.arg._id\r\n        );\r\n      })\r\n      .addCase(returnBook.rejected, (state, action) => {\r\n        state.loading = false;\r\n        state.error = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { clearSuccessMessage } = borrowedSlice.actions;\r\nexport default borrowedSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}