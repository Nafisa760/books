{"ast":null,"code":"// src/Features/BookSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst SERVER_URL = \"http://localhost:3001\";\n\n// Fetch all books\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.get(`${SERVER_URL}/books`);\n    return res.data;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Server error\");\n  }\n});\n\n// Add book\nexport const addBook = createAsyncThunk(\"books/addBook\", async (book, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.post(`${SERVER_URL}/books`, book);\n    return res.data;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Server error\");\n  }\n});\n\n// Edit book\nexport const editBook = createAsyncThunk(\"books/editBook\", async ({\n  id,\n  title,\n  author,\n  year\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.put(`${SERVER_URL}/books/${id}`, {\n      title,\n      author,\n      year\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Server error\");\n  }\n});\n\n// Delete book\nexport const deleteBook = createAsyncThunk(\"books/deleteBook\", async (id, {\n  rejectWithValue\n}) => {\n  try {\n    await axios.delete(`${SERVER_URL}/books/${id}`);\n    return id;\n  } catch (err) {\n    var _err$response4, _err$response4$data;\n    return rejectWithValue(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Server error\");\n  }\n});\nconst initialState = {\n  books: [],\n  isLoading: false,\n  isSuccess: false,\n  isError: false,\n  errorMessage: \"\"\n};\nconst bookSlice = createSlice({\n  name: \"books\",\n  initialState,\n  reducers: {\n    resetBookState: state => {\n      state.isLoading = false;\n      state.isSuccess = false;\n      state.isError = false;\n      state.errorMessage = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // FETCH\n    .addCase(fetchBooks.pending, state => {\n      state.isLoading = true;\n    }).addCase(fetchBooks.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.books = action.payload;\n    }).addCase(fetchBooks.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    })\n\n    // ADD\n    .addCase(addBook.pending, state => {\n      state.isLoading = true;\n    }).addCase(addBook.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.books.push(action.payload);\n    }).addCase(addBook.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    })\n\n    // EDIT\n    .addCase(editBook.pending, state => {\n      state.isLoading = true;\n    }).addCase(editBook.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.books = state.books.map(b => b._id === action.payload._id ? action.payload : b);\n    }).addCase(editBook.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    })\n\n    // DELETE\n    .addCase(deleteBook.pending, state => {\n      state.isLoading = true;\n    }).addCase(deleteBook.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.books = state.books.filter(b => b._id !== action.payload);\n    }).addCase(deleteBook.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    });\n  }\n});\nexport const {\n  resetBookState\n} = bookSlice.actions;\nexport default bookSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","SERVER_URL","fetchBooks","_","rejectWithValue","res","get","data","err","_err$response","_err$response$data","response","message","addBook","book","post","_err$response2","_err$response2$data","editBook","id","title","author","year","put","_err$response3","_err$response3$data","deleteBook","delete","_err$response4","_err$response4$data","initialState","books","isLoading","isSuccess","isError","errorMessage","bookSlice","name","reducers","resetBookState","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","push","map","b","_id","filter","actions","reducer"],"sources":["C:/Nafisa/books/client/src/Features/BookSlice.js"],"sourcesContent":["// src/Features/BookSlice.js\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst SERVER_URL = \"http://localhost:3001\";\r\n\r\n// Fetch all books\r\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async (_, { rejectWithValue }) => {\r\n  try {\r\n    const res = await axios.get(`${SERVER_URL}/books`);\r\n    return res.data;\r\n  } catch (err) {\r\n    return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n  }\r\n});\r\n\r\n// Add book\r\nexport const addBook = createAsyncThunk(\"books/addBook\", async (book, { rejectWithValue }) => {\r\n  try {\r\n    const res = await axios.post(`${SERVER_URL}/books`, book);\r\n    return res.data;\r\n  } catch (err) {\r\n    return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n  }\r\n});\r\n\r\n// Edit book\r\nexport const editBook = createAsyncThunk(\r\n  \"books/editBook\",\r\n  async ({ id, title, author, year }, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.put(`${SERVER_URL}/books/${id}`, { title, author, year });\r\n      return res.data;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n    }\r\n  }\r\n);\r\n\r\n// Delete book\r\nexport const deleteBook = createAsyncThunk(\"books/deleteBook\", async (id, { rejectWithValue }) => {\r\n  try {\r\n    await axios.delete(`${SERVER_URL}/books/${id}`);\r\n    return id;\r\n  } catch (err) {\r\n    return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n  }\r\n});\r\n\r\nconst initialState = {\r\n  books: [],\r\n  isLoading: false,\r\n  isSuccess: false,\r\n  isError: false,\r\n  errorMessage: \"\",\r\n};\r\n\r\nconst bookSlice = createSlice({\r\n  name: \"books\",\r\n  initialState,\r\n  reducers: {\r\n    resetBookState: (state) => {\r\n      state.isLoading = false;\r\n      state.isSuccess = false;\r\n      state.isError = false;\r\n      state.errorMessage = \"\";\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // FETCH\r\n      .addCase(fetchBooks.pending, (state) => { state.isLoading = true; })\r\n      .addCase(fetchBooks.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.books = action.payload;\r\n      })\r\n      .addCase(fetchBooks.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      })\r\n\r\n      // ADD\r\n      .addCase(addBook.pending, (state) => { state.isLoading = true; })\r\n      .addCase(addBook.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.books.push(action.payload);\r\n      })\r\n      .addCase(addBook.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      })\r\n\r\n      // EDIT\r\n      .addCase(editBook.pending, (state) => { state.isLoading = true; })\r\n      .addCase(editBook.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.books = state.books.map((b) =>\r\n          b._id === action.payload._id ? action.payload : b\r\n        );\r\n      })\r\n      .addCase(editBook.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      })\r\n\r\n      // DELETE\r\n      .addCase(deleteBook.pending, (state) => { state.isLoading = true; })\r\n      .addCase(deleteBook.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.books = state.books.filter((b) => b._id !== action.payload);\r\n      })\r\n      .addCase(deleteBook.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { resetBookState } = bookSlice.actions;\r\nexport default bookSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}