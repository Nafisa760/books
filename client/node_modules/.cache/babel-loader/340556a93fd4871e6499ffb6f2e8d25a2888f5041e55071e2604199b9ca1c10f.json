{"ast":null,"code":"// src/Features/BookSlice.js\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport axios from \"axios\";\nconst SERVER_URL = \"http://localhost:3001\";\n\n// -------------------------\n// ðŸ”¹ Async Thunks\n// -------------------------\n\n// Fetch all books\nexport const fetchBooks = createAsyncThunk(\"books/fetchBooks\", async (_, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.get(`${SERVER_URL}/books`);\n    return res.data;\n  } catch (err) {\n    var _err$response, _err$response$data;\n    return rejectWithValue(((_err$response = err.response) === null || _err$response === void 0 ? void 0 : (_err$response$data = _err$response.data) === null || _err$response$data === void 0 ? void 0 : _err$response$data.message) || \"Server error\");\n  }\n});\n\n// Add new book\nexport const addBook = createAsyncThunk(\"books/addBook\", async ({\n  title,\n  author,\n  year\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.post(`${SERVER_URL}/books`, {\n      title,\n      author,\n      year\n    });\n    return res.data;\n  } catch (err) {\n    var _err$response2, _err$response2$data;\n    return rejectWithValue(((_err$response2 = err.response) === null || _err$response2 === void 0 ? void 0 : (_err$response2$data = _err$response2.data) === null || _err$response2$data === void 0 ? void 0 : _err$response2$data.message) || \"Server error\");\n  }\n});\n\n// Edit book\nexport const editBook = createAsyncThunk(\"books/editBook\", async ({\n  id,\n  title,\n  author,\n  year\n}, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.put(`${SERVER_URL}/books/${id}`, {\n      title,\n      author,\n      year\n    });\n    return {\n      id,\n      ...res.data\n    }; // return id to update state\n  } catch (err) {\n    var _err$response3, _err$response3$data;\n    return rejectWithValue(((_err$response3 = err.response) === null || _err$response3 === void 0 ? void 0 : (_err$response3$data = _err$response3.data) === null || _err$response3$data === void 0 ? void 0 : _err$response3$data.message) || \"Server error\");\n  }\n});\n\n// Delete book\nexport const deleteBook = createAsyncThunk(\"books/deleteBook\", async (id, {\n  rejectWithValue\n}) => {\n  try {\n    const res = await axios.delete(`${SERVER_URL}/books/${id}`);\n    return {\n      id,\n      ...res.data\n    }; // return id to remove from state\n  } catch (err) {\n    var _err$response4, _err$response4$data;\n    return rejectWithValue(((_err$response4 = err.response) === null || _err$response4 === void 0 ? void 0 : (_err$response4$data = _err$response4.data) === null || _err$response4$data === void 0 ? void 0 : _err$response4$data.message) || \"Server error\");\n  }\n});\n\n// -------------------------\n// ðŸ”¹ Initial State\n// -------------------------\nconst initialState = {\n  books: [],\n  isLoading: false,\n  isError: false,\n  errorMessage: \"\",\n  isSuccess: false\n};\n\n// -------------------------\n// ðŸ”¹ Slice\n// -------------------------\nconst bookSlice = createSlice({\n  name: \"books\",\n  initialState,\n  reducers: {\n    resetBookState: state => {\n      state.isLoading = false;\n      state.isError = false;\n      state.isSuccess = false;\n      state.errorMessage = \"\";\n    }\n  },\n  extraReducers: builder => {\n    builder\n    // Fetch Books\n    .addCase(fetchBooks.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(fetchBooks.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.books = action.payload;\n    }).addCase(fetchBooks.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    })\n\n    // Add Book\n    .addCase(addBook.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(addBook.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.books.push(action.payload);\n    }).addCase(addBook.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    })\n\n    // Edit Book\n    .addCase(editBook.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(editBook.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      const index = state.books.findIndex(b => b._id === action.payload.id);\n      if (index !== -1) {\n        state.books[index] = {\n          ...state.books[index],\n          ...action.payload\n        };\n      }\n    }).addCase(editBook.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    })\n\n    // Delete Book\n    .addCase(deleteBook.pending, state => {\n      state.isLoading = true;\n      state.isError = false;\n    }).addCase(deleteBook.fulfilled, (state, action) => {\n      state.isLoading = false;\n      state.isSuccess = true;\n      state.books = state.books.filter(b => b._id !== action.payload.id);\n    }).addCase(deleteBook.rejected, (state, action) => {\n      state.isLoading = false;\n      state.isError = true;\n      state.errorMessage = action.payload;\n    });\n  }\n});\nexport const {\n  resetBookState\n} = bookSlice.actions;\nexport default bookSlice.reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","axios","SERVER_URL","fetchBooks","_","rejectWithValue","res","get","data","err","_err$response","_err$response$data","response","message","addBook","title","author","year","post","_err$response2","_err$response2$data","editBook","id","put","_err$response3","_err$response3$data","deleteBook","delete","_err$response4","_err$response4$data","initialState","books","isLoading","isError","errorMessage","isSuccess","bookSlice","name","reducers","resetBookState","state","extraReducers","builder","addCase","pending","fulfilled","action","payload","rejected","push","index","findIndex","b","_id","filter","actions","reducer"],"sources":["C:/Nafisa/books/client/src/Features/BookSlice.js"],"sourcesContent":["// src/Features/BookSlice.js\r\nimport { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\r\nimport axios from \"axios\";\r\n\r\nconst SERVER_URL = \"http://localhost:3001\";\r\n\r\n// -------------------------\r\n// ðŸ”¹ Async Thunks\r\n// -------------------------\r\n\r\n// Fetch all books\r\nexport const fetchBooks = createAsyncThunk(\r\n  \"books/fetchBooks\",\r\n  async (_, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.get(`${SERVER_URL}/books`);\r\n      return res.data;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n    }\r\n  }\r\n);\r\n\r\n// Add new book\r\nexport const addBook = createAsyncThunk(\r\n  \"books/addBook\",\r\n  async ({ title, author, year }, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.post(`${SERVER_URL}/books`, { title, author, year });\r\n      return res.data;\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n    }\r\n  }\r\n);\r\n\r\n// Edit book\r\nexport const editBook = createAsyncThunk(\r\n  \"books/editBook\",\r\n  async ({ id, title, author, year }, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.put(`${SERVER_URL}/books/${id}`, { title, author, year });\r\n      return { id, ...res.data }; // return id to update state\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n    }\r\n  }\r\n);\r\n\r\n// Delete book\r\nexport const deleteBook = createAsyncThunk(\r\n  \"books/deleteBook\",\r\n  async (id, { rejectWithValue }) => {\r\n    try {\r\n      const res = await axios.delete(`${SERVER_URL}/books/${id}`);\r\n      return { id, ...res.data }; // return id to remove from state\r\n    } catch (err) {\r\n      return rejectWithValue(err.response?.data?.message || \"Server error\");\r\n    }\r\n  }\r\n);\r\n\r\n// -------------------------\r\n// ðŸ”¹ Initial State\r\n// -------------------------\r\nconst initialState = {\r\n  books: [],\r\n  isLoading: false,\r\n  isError: false,\r\n  errorMessage: \"\",\r\n  isSuccess: false,\r\n};\r\n\r\n// -------------------------\r\n// ðŸ”¹ Slice\r\n// -------------------------\r\nconst bookSlice = createSlice({\r\n  name: \"books\",\r\n  initialState,\r\n  reducers: {\r\n    resetBookState: (state) => {\r\n      state.isLoading = false;\r\n      state.isError = false;\r\n      state.isSuccess = false;\r\n      state.errorMessage = \"\";\r\n    },\r\n  },\r\n  extraReducers: (builder) => {\r\n    builder\r\n      // Fetch Books\r\n      .addCase(fetchBooks.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n      })\r\n      .addCase(fetchBooks.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.books = action.payload;\r\n      })\r\n      .addCase(fetchBooks.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      })\r\n\r\n      // Add Book\r\n      .addCase(addBook.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n      })\r\n      .addCase(addBook.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.books.push(action.payload);\r\n      })\r\n      .addCase(addBook.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      })\r\n\r\n      // Edit Book\r\n      .addCase(editBook.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n      })\r\n      .addCase(editBook.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        const index = state.books.findIndex((b) => b._id === action.payload.id);\r\n        if (index !== -1) {\r\n          state.books[index] = { ...state.books[index], ...action.payload };\r\n        }\r\n      })\r\n      .addCase(editBook.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      })\r\n\r\n      // Delete Book\r\n      .addCase(deleteBook.pending, (state) => {\r\n        state.isLoading = true;\r\n        state.isError = false;\r\n      })\r\n      .addCase(deleteBook.fulfilled, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isSuccess = true;\r\n        state.books = state.books.filter((b) => b._id !== action.payload.id);\r\n      })\r\n      .addCase(deleteBook.rejected, (state, action) => {\r\n        state.isLoading = false;\r\n        state.isError = true;\r\n        state.errorMessage = action.payload;\r\n      });\r\n  },\r\n});\r\n\r\nexport const { resetBookState } = bookSlice.actions;\r\nexport default bookSlice.reducer;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}